{"is_source_file": true, "format": "Python", "description": "This file defines REST API endpoints for managing shopping carts and checkout processes in an e-commerce backend, using Flask and PostgreSQL. It includes route handlers, utility functions for cart and product manipulations, and schema-based request validation.", "external_files": ["../db", "../errors", "../schemas"], "external_methods": ["get_conn", "error_response"], "published": ["CartsCollection", "CartById", "CartItemsCollection", "CartItemByProduct", "Checkout"], "classes": [{"name": "CartsCollection", "description": "Handles creation of new shopping carts via POST /carts."}, {"name": "CartById", "description": "Handles retrieval and clearing of a specific cart via GET and DELETE /carts/<cart_id>."}, {"name": "CartItemsCollection", "description": "Handles adding items to a cart via POST /carts/<cart_id>/items."}, {"name": "CartItemByProduct", "description": "Handles updating or removing a specific product from a cart via PUT and DELETE /carts/<cart_id>/items/<product_id>."}, {"name": "Checkout", "description": "Handles the checkout process, converting a cart into an order via POST /checkout."}], "methods": [{"name": "Optional[Dict[str,Any]] _cart_exists_open(cur: Any, cart_id: int)", "description": "Checks if a cart exists and is open.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] _get_product_for_sale(cur: Any, product_id: int)", "description": "Retrieves product details for sale, including inventory status.", "scope": "", "scopeKind": ""}, {"name": "Tuple[int,str] _compute_cart_subtotal(items: List[Dict[str, Any]])", "description": "Calculates the subtotal amount for the cart items.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] _get_cart_with_items(cur: Any, cart_id: int)", "description": "Retrieves cart details along with its items and computed subtotal.", "scope": "", "scopeKind": ""}, {"name": "delete(self, cart_id: int)", "scope": "CartById", "scopeKind": "class", "description": "unavailable"}, {"name": "delete(self, cart_id: int, product_id: int)", "scope": "CartItemByProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, cart_id: int)", "scope": "CartById", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self)", "scope": "CartsCollection", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, payload: Dict[str, Any])", "scope": "Checkout", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, payload: Dict[str, Any], cart_id: int)", "scope": "CartItemsCollection", "scopeKind": "class", "description": "unavailable"}, {"name": "put(self, payload: Dict[str, Any], cart_id: int, product_id: int)", "scope": "CartItemByProduct", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_conn", "error_response", "cur.execute", "cur.fetchone", "cur.fetchall"], "search-terms": ["cart", "carts", "inventory", "order", "checkout", "cart_items", "basket", "shopping_cart", "cart_id"], "state": 2, "file_id": 11, "knowledge_revision": 26, "git_revision": "0997c0446192617f273e587091fc06c6b0f2c56b", "ctags": [{"_type": "tag", "name": "CartById", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^class CartById(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CartItemByProduct", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^class CartItemByProduct(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CartItemsCollection", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^class CartItemsCollection(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CartsCollection", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^class CartsCollection(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Checkout", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^class Checkout(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_cart_exists_open", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^def _cart_exists_open(cur: Any, cart_id: int) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(cur: Any, cart_id: int)"}, {"_type": "tag", "name": "_compute_cart_subtotal", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^def _compute_cart_subtotal(items: List[Dict[str, Any]]) -> Tuple[int, str]:$/", "language": "Python", "typeref": "typename:Tuple[int,str]", "kind": "function", "signature": "(items: List[Dict[str, Any]])"}, {"_type": "tag", "name": "_get_cart_with_items", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^def _get_cart_with_items(cur: Any, cart_id: int) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(cur: Any, cart_id: int)"}, {"_type": "tag", "name": "_get_product_for_sale", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^def _get_product_for_sale(cur: Any, product_id: int) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(cur: Any, product_id: int)"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def delete(self, cart_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, cart_id: int)", "scope": "CartById", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def delete(self, cart_id: int, product_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, cart_id: int, product_id: int)", "scope": "CartItemByProduct", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def get(self, cart_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, cart_id: int)", "scope": "CartById", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "CartsCollection", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def post(self, payload: Dict[str, Any]):$/", "language": "Python", "kind": "member", "signature": "(self, payload: Dict[str, Any])", "scope": "Checkout", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def post(self, payload: Dict[str, Any], cart_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, payload: Dict[str, Any], cart_id: int)", "scope": "CartItemsCollection", "scopeKind": "class"}, {"_type": "tag", "name": "put", "path": "/home/kavia/workspace/code-generation/ecommerce-starter-scaffold-18595-18611/backend/app/routes/cart.py", "pattern": "/^    def put(self, payload: Dict[str, Any], cart_id: int, product_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, payload: Dict[str, Any], cart_id: int, product_id: int)", "scope": "CartItemByProduct", "scopeKind": "class"}], "hash": "b6db9a67f71e6c601195d7b993960114", "format-version": 4, "code-base-name": "backend", "filename": "backend/app/routes/cart.py", "fields": [{"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"26": "0997c0446192617f273e587091fc06c6b0f2c56b"}]}